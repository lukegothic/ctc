<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>¿Conoces tu ciudad?</title>
    <style>
      #map {
        height: 100%;
      }
      #timeleftbar {
        position: absolute;
        top:0;
        left:0;
        width:100%;
        background-color: #888;
        height: 2px;
        -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.75);
        -moz-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.75);
        box-shadow: 0 1px 2px 0px rgba(0,0,0,0.75);
        opacity: 1;
        transition:all 0.2s linear;
        transition-delay: 0.2s;
      }
      #timeleftbar .bar {
        height:2px;
        background-color: #f00;
        margin: 0 auto;
        transition: width 25ms linear;
      }
      #timeleftbar.hidden {
        opacity:0;
      }
      #timeleft {
        color: #fff;
        text-shadow: 0 0 0.2em #000, 0 0 0.2em #000, 0 0 0.2em #000;
        font-weight: bold;
        position: absolute;
        top: 0;
        margin-left: -50px;
        left:50%;
        padding:5px;
        border-bottom-right-radius: 5px;
        border-bottom-left-radius: 5px;
        border: 2px ridge #fff;
        border-top:none;
        margin-top:2px;
        background-color: #888;
        box-sizing: border-box;
        font-size: 1.5em;
        font-family: Verdana, Arial, Helvetica, sans-serif;
        -webkit-box-shadow: 2px 2px 2px 0px rgba(0,0,0,0.75);
        -moz-box-shadow: 2px 2px 2px 0px rgba(0,0,0,0.75);
        box-shadow: 2px 2px 2px 0px rgba(0,0,0,0.75);
        min-width: 100px;
        text-align: center;
        transition:all 0.3s ease-in;
      }
      #timeleft.hidden {
        transform: translateY(-50px);
      }
      #carousel {
        position: absolute;
        top: inherit;
        left: inherit;
        bottom: 40px;
        right: 25%;
        width: 50%;
        transition:all 0.3s ease-in;
      }
      .overlay {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        opacity: 1;
        visibility: visible;
        background: rgba(0, 0, 0, 0.75);
        -webkit-transition: all 0.3s;
        -moz-transition: all 0.3s;
        transition: all 0.3s;
      }
      @keyframes fadeIn {
        0% {
          display: none;
          opacity: 0;
        }
        1% {
          display: block;
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }
      #carousel.thumbnail + .overlay {
        opacity: 0;
        visibility: hidden;
      }
      #carousel .photo {
        width:100%;
        height:0;
        padding-bottom: 100%;
				-webkit-box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.75);
				-moz-box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.75);
				box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.75);
        background-size: cover;
        background-position: center;
        transition: all 0.3s;
        position: absolute;
        bottom:0;
        box-sizing: border-box;
        border: 5px solid white;
        border-bottom-width: 10px;
      }
      #carousel .photo.left {
        transform: translateX(-105%);
        transform-origin: bottom right;
        opacity: 0.6;
        z-index: 3;
        cursor: pointer;
      }
      #carousel .photo.left:hover, #carousel .photo.right:hover,
      #carousel.thumbnail .photo.left:hover, #carousel.thumbnail .photo.right:hover {
        opacity: 0.8;
      }
      #carousel .photo.central {
        z-index: 5;
        cursor: zoom-out;
      }
      #carousel .photo.right {
        transform: translateX(105%);
        transform-origin: bottom left;
        opacity: 0.6;
        z-index: 4;
        cursor: pointer;
      }
      #carousel.thumbnail {
        top: inherit;
        left: inherit;
				bottom: 40px;
				right: 70px;
        width: 13%;
      }
      #carousel.thumbnail .photo {

      }
      #carousel.thumbnail .photo.left {
        transform: rotate(-5deg) translateX(-20px);
        transform-origin: bottom right;
        opacity: 0.6;
        z-index: 3;
        cursor: pointer;
      }
      #carousel.thumbnail .photo.central {
        z-index: 5;
        cursor: zoom-in;
      }
      #carousel.thumbnail .photo.right {
        transform: rotate(5deg) translateX(20px);
        transform-origin: bottom left;
        opacity: 0.6;
        z-index: 4;
        cursor: pointer;
      }
			#carousel.hidden {
				width: 0;
			}
			#carousel.hidden .photo {
				border: 0;
			}
      /* game results panel */
      #gameresults {
        /* modal */
        /* TODO: REFINAR EFECTO ETC https://tympanus.net/Development/ModalWindowEffects/ */
        position: fixed;
      	top: 50%;
      	left: 50%;
      	width: 50%;
        max-width: 630px;
        min-width: 320px;
      	height: auto;
      	visibility: hidden;
      	-webkit-backface-visibility: hidden;
      	-moz-backface-visibility: hidden;
      	backface-visibility: hidden;
      	-webkit-transform: translateX(-50%) translateY(-50%);
      	-moz-transform: translateX(-50%) translateY(-50%);
      	-ms-transform: translateX(-50%) translateY(-50%);
      	transform: translateX(-50%) translateY(-50%);
      }
      #gameresults .content {
        /* diseno */
        color: #fff;
        background: #e74c3c;
        position: relative;
        border-radius: 3px;
        margin: 0 auto;
        border: 6px ridge #fff;
        /* effect 1 */
        -webkit-transform: scale(0.7);
        -moz-transform: scale(0.7);
        -ms-transform: scale(0.7);
        transform: scale(0.7);
        opacity: 0;
        -webkit-transition: all 0.3s;
        -moz-transition: all 0.3s;
        transition: all 0.3s;
        /* TODO: mostrar ¡tiempo! en el visor */
        transition-delay: 1s;
      }
      #carousel.hidden ~ #gameresults {
        /* show dialog */
        visibility: visible;
      }
      #carousel.hidden ~ #gameresults .content {
        /* show effect */
        -webkit-transform: scale(1);
      	-moz-transform: scale(1);
      	-ms-transform: scale(1);
      	transform: scale(1);
      	opacity: 1;
      }

      /* fotos encontradas */
			.guessmarker {
				position: absolute;
				bottom: 0;
				right: 0;
        z-index: 6;
        pointer-events: none;
        width: 100%;
        height: auto;
			}
			.guessmarker path {
				fill:none;
				stroke:#00ff00;
				stroke-width:3px;
				stroke-linecap: round;
				stroke-linejoin: round;
				stroke-miterlimit: 10;
				stroke-opacity:1;
				stroke-dasharray: 194;
				stroke-dashoffset: 194;
		   }
       #carousel .photo.central.found + .guessmarker path {
         animation: write 500ms 1 ease-out forwards;
       }
			@keyframes write {
				0% {
					stroke-dashoffset: 194;
				}
				100% {
					stroke-dashoffset: 0;
				}
			}
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      .shake-horizontal{transform-origin:center center}@keyframes shake-horizontal{2%{transform:translate(3px, 0) rotate(0)}4%{transform:translate(9px, 0) rotate(0)}6%{transform:translate(7px, 0) rotate(0)}8%{transform:translate(-7px, 0) rotate(0)}10%{transform:translate(-9px, 0) rotate(0)}12%{transform:translate(7px, 0) rotate(0)}14%{transform:translate(2px, 0) rotate(0)}16%{transform:translate(0px, 0) rotate(0)}18%{transform:translate(-3px, 0) rotate(0)}20%{transform:translate(7px, 0) rotate(0)}22%{transform:translate(-3px, 0) rotate(0)}24%{transform:translate(-1px, 0) rotate(0)}26%{transform:translate(1px, 0) rotate(0)}28%{transform:translate(-5px, 0) rotate(0)}30%{transform:translate(-8px, 0) rotate(0)}32%{transform:translate(-4px, 0) rotate(0)}34%{transform:translate(2px, 0) rotate(0)}36%{transform:translate(-1px, 0) rotate(0)}38%{transform:translate(-8px, 0) rotate(0)}40%{transform:translate(4px, 0) rotate(0)}42%{transform:translate(-9px, 0) rotate(0)}44%{transform:translate(1px, 0) rotate(0)}46%{transform:translate(2px, 0) rotate(0)}48%{transform:translate(9px, 0) rotate(0)}50%{transform:translate(-6px, 0) rotate(0)}52%{transform:translate(7px, 0) rotate(0)}54%{transform:translate(1px, 0) rotate(0)}56%{transform:translate(7px, 0) rotate(0)}58%{transform:translate(-6px, 0) rotate(0)}60%{transform:translate(10px, 0) rotate(0)}62%{transform:translate(-5px, 0) rotate(0)}64%{transform:translate(4px, 0) rotate(0)}66%{transform:translate(-2px, 0) rotate(0)}68%{transform:translate(-2px, 0) rotate(0)}70%{transform:translate(-3px, 0) rotate(0)}72%{transform:translate(0px, 0) rotate(0)}74%{transform:translate(-7px, 0) rotate(0)}76%{transform:translate(-2px, 0) rotate(0)}78%{transform:translate(0px, 0) rotate(0)}80%{transform:translate(1px, 0) rotate(0)}82%{transform:translate(3px, 0) rotate(0)}84%{transform:translate(-7px, 0) rotate(0)}86%{transform:translate(7px, 0) rotate(0)}88%{transform:translate(10px, 0) rotate(0)}90%{transform:translate(6px, 0) rotate(0)}92%{transform:translate(9px, 0) rotate(0)}94%{transform:translate(10px, 0) rotate(0)}96%{transform:translate(-3px, 0) rotate(0)}98%{transform:translate(0px, 0) rotate(0)}0%,100%{transform:translate(0, 0) rotate(0)}} .shake-horizontal{animation-name:shake-horizontal;animation-duration:100ms;animation-timing-function:ease-in-out;animation-iteration-count:infinite}
      .shake{transform-origin:center center}@keyframes shake{2%{transform:translate(-1.5px, .5px) rotate(.5deg)}4%{transform:translate(.5px, -1.5px) rotate(.5deg)}6%{transform:translate(-.5px, .5px) rotate(1.5deg)}8%{transform:translate(-.5px, -1.5px) rotate(1.5deg)}10%{transform:translate(-.5px, 1.5px) rotate(.5deg)}12%{transform:translate(2.5px, -1.5px) rotate(-.5deg)}14%{transform:translate(1.5px, .5px) rotate(-.5deg)}16%{transform:translate(1.5px, -1.5px) rotate(.5deg)}18%{transform:translate(2.5px, -.5px) rotate(.5deg)}20%{transform:translate(-.5px, 1.5px) rotate(.5deg)}22%{transform:translate(-.5px, -.5px) rotate(.5deg)}24%{transform:translate(2.5px, -1.5px) rotate(1.5deg)}26%{transform:translate(-.5px, 2.5px) rotate(-.5deg)}28%{transform:translate(2.5px, -1.5px) rotate(.5deg)}30%{transform:translate(-1.5px, -.5px) rotate(-.5deg)}32%{transform:translate(.5px, 1.5px) rotate(-.5deg)}34%{transform:translate(2.5px, .5px) rotate(.5deg)}36%{transform:translate(1.5px, -1.5px) rotate(.5deg)}38%{transform:translate(2.5px, 2.5px) rotate(.5deg)}40%{transform:translate(-.5px, -.5px) rotate(.5deg)}42%{transform:translate(2.5px, -1.5px) rotate(.5deg)}44%{transform:translate(1.5px, -.5px) rotate(1.5deg)}46%{transform:translate(.5px, 2.5px) rotate(.5deg)}48%{transform:translate(.5px, 1.5px) rotate(-.5deg)}50%{transform:translate(-1.5px, -.5px) rotate(-.5deg)}52%{transform:translate(.5px, 1.5px) rotate(-.5deg)}54%{transform:translate(-.5px, .5px) rotate(-.5deg)}56%{transform:translate(1.5px, -.5px) rotate(.5deg)}58%{transform:translate(.5px, 2.5px) rotate(1.5deg)}60%{transform:translate(-.5px, 1.5px) rotate(-.5deg)}62%{transform:translate(2.5px, .5px) rotate(1.5deg)}64%{transform:translate(-.5px, 2.5px) rotate(.5deg)}66%{transform:translate(.5px, -.5px) rotate(-.5deg)}68%{transform:translate(.5px, -.5px) rotate(-.5deg)}70%{transform:translate(-1.5px, 2.5px) rotate(1.5deg)}72%{transform:translate(-.5px, 1.5px) rotate(1.5deg)}74%{transform:translate(-.5px, 2.5px) rotate(1.5deg)}76%{transform:translate(2.5px, .5px) rotate(-.5deg)}78%{transform:translate(2.5px, 1.5px) rotate(1.5deg)}80%{transform:translate(-1.5px, -.5px) rotate(-.5deg)}82%{transform:translate(2.5px, -1.5px) rotate(1.5deg)}84%{transform:translate(-1.5px, .5px) rotate(-.5deg)}86%{transform:translate(2.5px, -1.5px) rotate(.5deg)}88%{transform:translate(1.5px, -.5px) rotate(.5deg)}90%{transform:translate(2.5px, 1.5px) rotate(.5deg)}92%{transform:translate(-.5px, -1.5px) rotate(-.5deg)}94%{transform:translate(-1.5px, 1.5px) rotate(.5deg)}96%{transform:translate(2.5px, 2.5px) rotate(1.5deg)}98%{transform:translate(1.5px, -1.5px) rotate(-.5deg)}0%,100%{transform:translate(0, 0) rotate(0)}}.shake{animation-name:shake;animation-duration:100ms;animation-timing-function:ease-in-out;animation-iteration-count:infinite}
      .shake-freeze{animation-play-state:paused;animation-name:none}

      /* overrides google maps api */
			/* ocultar boton cerrar del infowindow */
      .gm-style-iw + div {
        display: none;
      }
      /* results */
      .row {
        text-align: center;
      }
      .star {
        opacity: 0.0;
        filter: grayscale(100%);
        width: 20%;
        transition: opacity 0.3s, filter 0.3s;
      }
      .star.active {
        opacity: 1;
        filter: none;
      }
      #star1 {
        transition-delay: 1.3s;
      }
      #star2 {
        transition-delay: 1.6s;
      }
      #star3 {
        transition-delay: 1.9s;
      }
      #score {
        font-family: fantasy;
        font-size: 3em;
        font-weight: bold;
      }
    </style>
  </head>
  <body class="shake-horizontal shake-freeze">
    <div id="map"></div>
		<div id="carousel" class="thumbnail">
      <!--<div class="photo lefthidden" style="background-image:url(img/locations/00000001.jpg)"></div>-->
      <div class="photo left"></div>
      <div class="photo central"></div>
      <svg viewbox="0 0 68 68" class="guessmarker">
  			<path d="m 36.658574,1.7735772 c 0,0 -22.725327,-1.88556986 -33.1865855,24.6668938 C -4.9444985,47.802961 18.606671,65.61062 38.405003,64.28564 52.109881,63.36846 68.865562,44.305621 62.553743,27.701871 55.9163,10.241537 42.385414,7.3325676 32.024242,7.7481876" />
  		</svg>
      <div class="photo right"></div>
      <!--<div class="photo righthidden" style="background-image:url(img/locations/00000005.jpg)"></div>-->
    </div>
    <div class="overlay"></div>
    <div id="gameresults">
			<div class="content">
        <div class="row stars">
		      <img class="star" src="img/star.svg" id="star1" /><img class="star" src="img/star.svg" id="star2" /><img class="star" src="img/star.svg" id="star3" />
        </div>
        <div class="row scores">
          <span id="score">0</span>
        </div>
        <div class="row locations">
          <div class="location" id="location1"></div>
          <div class="location" id="location2"></div>
          <div class="location" id="location3"></div>
          <div class="location" id="location4"></div>
        </div>
        <div class="row collection">
          <img src="xxx" alt="" /><span id="collectionName">Colecci&oacute;n</span><progress id="collectionprogress"></progress>
        </div>
        <div class="row buttons">
          <button id="newGame">Nueva partida</button>
          <a>Like FB</a>
          <a>Yo</a>
        </div>
			</div>
		</div>
    <div id="timeleftbar" class="hidden"><div class="bar"></div></div>
    <span id="timeleft" class="hidden">0:00</span>
    <script src="js/utils.js"></script>
    <script src="js/gmaps/game.js"></script>
    <script src="js/vendor/countUp.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDn8-1Fo2BSyDP_ahw8vNsATM9GnWcXD-Q&callback=game.setup&region=ES"></script>
  </body>
</html>
